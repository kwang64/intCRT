% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/0_Data_Generation_TimeIndi_UTT.R
\name{gen_time_dependent_cov}
\alias{gen_time_dependent_cov}
\title{Generate Stratified Dataset with Clustered Binary Covariate and Time-Varying UTT Indicator}
\usage{
gen_time_dependent_cov(M, ni, beta, gen_visits, cens, rho = 0, baseline, S)
}
\arguments{
\item{M}{Numeric. Number of communities (clusters).}

\item{ni}{Numeric vector of length 2. The minimum and maximum number of individuals per community. Sampled uniformly.}

\item{beta}{Numeric vector. Coefficients for: (1) the cluster-level treatment variable, (2) the time-varying UTT indicator, and (3) their interaction.}

\item{gen_visits}{Function. A function to generate internal visit times (e.g., HIV testing dates) for each individual.}

\item{cens}{Numeric. Loss-to-follow-up rate. Set to 0 for no censoring.}

\item{rho}{Numeric. Kendallâ€™s tau indicating the strength of within-cluster dependence. Set to 0 for independence.}

\item{baseline}{List. A list of baseline distribution functions (e.g., from \code{return_baseline()} or \code{return_exp_baseline()}) for each stratum.}

\item{S}{Either a function that generates a vector of stratum memberships (of length equal to cluster size) or a vector of length \code{M} indicating fixed stratum assignments for each cluster.}
}
\value{
A long-format \code{data.frame} with two rows per individual (pre- and post-UTT), including:
\describe{
\item{id}{Individual identifier.}
\item{stratum, group}{Stratum and cluster IDs.}
\item{treat}{Binary treatment indicator (constant within cluster).}
\item{utt}{Time-varying UTT policy indicator (0 before, 1 after).}
\item{start, stop}{Time interval corresponding to each policy stage.}
\item{left, right}{Interval-censored survival time for each individual.}
}
}
\description{
Simulates a stratified dataset for interval-censored survival analysis where each cluster (community)
is assigned a binary treatment indicator (constant within cluster), and individuals are affected by a
time-varying intervention (UTT). Within-cluster dependence can be introduced via a copula.
}
\details{
If \code{rho > 0}, the function introduces dependence among individuals in a cluster using a Clayton copula. Otherwise, individual failure times are generated independently. Each individual is subject to internal visit times and possible loss to follow-up.
}
\examples{
set.seed(123)
baseline <- list(return_exp_baseline(10, lambda0 = 0.2, alpha = 0))
gen_visits <- function(n) t(replicate(n, sort(runif(4, 0, 10))))
simdat <- gen_time_dependent_cov(M = 4, ni = c(5, 6),
                                beta = c(0.1, -0.2, 0.05),
                                gen_visits = gen_visits,
                                cens = 0.01,
                                rho = 0,
                                baseline = baseline,
                                S = rep(1, 4))

}
