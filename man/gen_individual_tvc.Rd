% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/0_Data_Generation_TimeIndi_UTT.R
\name{gen_individual_tvc}
\alias{gen_individual_tvc}
\title{Generate Interval-Censored Long-Form Data for an Individual with Time-Varying UTT Indicator}
\usage{
gen_individual_tvc(
  u.t,
  tau.i,
  beta,
  x.i,
  baseline.i,
  visits.i,
  cens,
  stratum,
  group,
  id
)
}
\arguments{
\item{u.t}{Numeric. Uniform random variate used to simulate failure time.}

\item{tau.i}{Numeric. Time of the UTT policy implementation for the individual's stratum.}

\item{beta}{Numeric vector. Coefficient vector for the survival model (including pre-UTT effect, UTT effect, and interaction).}

\item{x.i}{Numeric. Indicator for intervention assignment (e.g., 0 = control, 1 = treated).}

\item{baseline.i}{List. Baseline survival components for the individual's stratum (from \code{return_exp_baseline} or similar), including:
\itemize{
\item \code{survival}: Data frame of survival probabilities.
\item \code{density}: Density estimates (not directly used).
\item \code{hazard}: Hazard rates (not directly used).
}}

\item{visits.i}{Numeric vector. Scheduled HIV testing visit times for the individual.}

\item{cens}{Numeric. Censoring rate (0 if no censoring).}

\item{stratum}{Numeric. Stratum ID to which the individual belongs.}

\item{group}{Numeric. Community or group ID.}

\item{id}{Numeric. Unique identifier for the individual.}
}
\value{
A data frame with two rows (pre- and post-UTT policy) and the following columns:
\describe{
\item{stratum, group, id}{Identifiers for stratum, group, and individual.}
\item{treat}{Indicator for intervention assignment.}
\item{utt}{Time-varying UTT policy indicator (0 = before policy, 1 = after).}
\item{start, stop}{Start and stop times of each time interval.}
\item{left, right}{Interval-censored survival information for the individual.}
}
}
\description{
Constructs the long-form data for a single individual in a survival study with time-varying
intervention (UTT policy) and potential interval censoring due to scheduled study visits and loss to follow-up.
}
\details{
The function simulates a failure time from an inverse survival function, applies right censoring if specified, and
determines interval-censored observation based on scheduled visits. It returns two rows for modeling time-varying effects of UTT.
}
\examples{
base <- return_exp_baseline(10, lambda0 = 0.1, alpha = 0)
visits <- seq(1, 9, by = 2)
gen_individual_tvc(u.t = runif(1), tau.i = 5, beta = c(0.2, -0.1, 0.05),
                   x.i = 1, baseline.i = base, visits.i = visits,
                   cens = 0.01, stratum = 1, group = 1, id = 1001)

}
