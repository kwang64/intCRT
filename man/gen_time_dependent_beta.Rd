% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/0_Data_Generation_CombPrev.R
\name{gen_time_dependent_beta}
\alias{gen_time_dependent_beta}
\title{Generate Stratified Survival Data with Time-Dependent Covariate Effects}
\usage{
gen_time_dependent_beta(
  M,
  ni,
  beta,
  beta.args,
  gen_visits,
  cens,
  rho = 0,
  alpha = 0,
  baseline,
  S
)
}
\arguments{
\item{M}{Integer. Number of communities (clusters).}

\item{ni}{Integer vector of length 2. Range of individual counts per community, e.g., \code{c(10, 20)}.}

\item{beta}{List or character. Either a list with a function \code{beta.t()} describing the time-dependent effect,
or a string matching one of \code{\link{tvbeta_fns}} options (e.g., "log", "linear").
If \code{alpha > 0}, this determines the cluster-conditional effect, and the marginal effect is \eqn{\beta(t) \cdot \alpha}.}

\item{beta.args}{List. Arguments required by the time-dependent effect function (e.g., \code{beta}, \code{tau}).}

\item{gen_visits}{Function. A function that takes the total number of individuals and returns a list of vectors
containing each individual's internal visit times.}

\item{cens}{Numeric. Loss-to-follow-up rate (0 indicates no censoring).}

\item{rho}{Numeric. Kendall's tau controlling intra-cluster dependence using Clayton copulas; set to 0 for independence.}

\item{alpha}{Numeric. Index parameter for the positive stable distribution; controls cluster-level frailty. Set to 0 for no frailty.}

\item{baseline}{List. A list of baseline hazard/survival/density functions (one per stratum).}

\item{S}{Function or vector. A function to generate stratum membership per cluster, or a fixed vector of stratum IDs (one per cluster).}
}
\value{
A data frame with interval-censored observations. Columns include:
\describe{
\item{stratum}{Stratum ID.}
\item{group}{Community/group ID.}
\item{treat}{Treatment assignment (0 or 1).}
\item{left}{Left endpoint of the event time interval.}
\item{right}{Right endpoint of the event time interval.}
}
}
\description{
Simulates a stratified, community-level survival dataset with interval-censored failure times
and a time-dependent covariate effect (e.g., treatment or intervention). Individuals may be clustered
within communities and optionally connected through copula-based dependence or positive stable frailty.
}
\details{
The time-dependent covariate effect may be specified as a named option (e.g., "log", "linear", "piecewise")
or supplied as a custom list with function \code{beta.t()}. When frailty (\code{alpha > 0}) is present,
the function applies a cluster-specific effect multiplier to the baseline hazard.

The function supports both frailty-based dependence using positive stable distributions (via \code{alpha})
and subnetwork dependence within clusters using Clayton copulas (via \code{rho}).
If both are zero, individuals are treated as conditionally independent.
}
\examples{
# Minimal example (assuming supporting functions and objects defined elsewhere):
# baseline_list <- list(baseline1, baseline2)
# gen_visits_fn <- function(n) replicate(n, sort(runif(5, 0, 10)), simplify = FALSE)
# S_fn <- function(n) sample(1:2, n, replace = TRUE)
# df <- gen_time_dependent_beta(M = 4, ni = c(10, 20),
#     beta = "linear", beta.args = list(beta = c(0.3, -0.1)),
#     gen_visits = gen_visits_fn, cens = 0.05,
#     rho = 0.2, alpha = 0.5,
#     baseline = baseline_list, S = S_fn)

}
\seealso{
\code{\link{gen_individual_tvbeta}}, \code{\link{tvbeta_fns}}, \code{\link{get_surv_tvb}}
}
